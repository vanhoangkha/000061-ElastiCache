[
{
	"uri": "/vi/",
	"title": "Amazon ElastiCache - Redis",
	"tags": [],
	"description": "",
	"content": "Amazon ElastiCache - Redis Tổng quan Trong bài lab này, bạn sẽ tìm hiểu các khái niệm cơ bản và thực hành về Amazon ElastiCache - Redis.\nNội dung Giới thiệu Các bước chuẩn bị Tạo ElastiCache cluster Sử dụng AWS SDK để ghi và đọc tới ElastiCache Dọn dẹp tài nguyên "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.5-connect-to-the-cluster_s-node/3.5.1-redis-cluster-mode-disabled-cluster_s-endpoints-console/",
	"title": "Cluster Mode Disabled",
	"tags": [],
	"description": "",
	"content": "Nếu một Redis cluster (cluster mode disabled) chỉ có một node, thì endpoint của node được sử dụng cho cả việc đọc và ghi. Nếu một Redis cluster có nhiều node, thì có ba loại endpoint: primary endpoint, the reader endpoint and the node endpoints.\nPrimary endpoint là tên DNS luôn phân giải đến node chính trong cluster. Primary endpoint miễn nhiễm với các thay đổi đối với cluster của bạn, chẳng hạn như promoting a read replica cho vai trò chính. Đối với hoạt động ghi, bạn nên kết nối các ứng dụng của mình với endpoint.\nReader endpoint sẽ chia đều các kết nối đến endpoint giữa tất cả các read replicas trong ElastiCache for Redis cluster. Các yếu tố bổ sung như thời điểm ứng dụng tạo kết nối hoặc cách ứng dụng (tái sử dụng) các kết nối sẽ xác định phân phối lưu lượng. Reader endpoints theo kịp các thay đổi của cluster trong thời gian thực khi các replicas được thêm vào hoặc loại bỏ. Bạn có thể ElastiCache for Redis cluster’s multiple read replicas ở các AWS Availability Zones (AZ) khác nhau để đảm bảo tính khả dụng cao của các reader endpoints.\nĐối với hoạt động đọc, các ứng dụng cũng có thể kết nối với bất kỳ node nào trong cluster. Không giống như primary endpoint, node endpoints phân giải thành các endpoint cụ thể. Nếu bạn thực hiện thay đổi trong cluster của mình, chẳng hạn như thêm hoặc xóa bản sao, bạn phải cập nhật các node endpoints trong ứng dụng của mình.\nĐể tìm Redis (cluster mode disabled) cluster\u0026rsquo;s endpoints Đăng nhập vào AWS Management Console và mở ElastiCache console tại https://console.aws.amazon.com/elasticache/.\nTừ ngăn điều hướng, chọn Redis clusters. Màn hình Redis clusters sẽ xuất hiện với danh sách các Redis (cluster mode disabled) và Redis (cluster mode enabled) clusters.\nĐể tìm Primary và/hoặc Reader endpoints của cluster, hãy chọn tên của cluster.\nNếu Redis (cluster mode disabled) cluster có các replica nodes, bạn có thể tìm thấy replica node endpoints của cluster bằng cách chọn tên của cluster. Màn hình các node xuất hiện với mỗi node trong cluster, primary và replicas, được liệt kê với endpoint của nó.\nĐể sao chép một endpoint vào khay nhớ tạm của bạn: Mỗi lần một endpoint, tìm rồi đánh dấu endpoint bạn muốn sao chép.\nBấm chuột phải vào endpoint được đánh dấu, sau đó chọn Copy từ trình đơn ngữ cảnh. Endpoint được đánh dấu hiện được sao chép vào khay nhớ tạm của bạn.\nIn-transit encryption not enabled\nclusterName.xxxxxx.nodeId.regionAndAz.cache.amazonaws.com:port\rredis-01.7abc2d.0001.usw2.cache.amazonaws.com:6379 In-transit encryption enabled\nmaster.clusterName.xxxxxx.regionAndAz.cache.amazonaws.com:port\rmaster.ncit.ameaqx.use1.cache.amazonaws.com:6379 "
},
{
	"uri": "/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Tổng quan Amazon ElastiCache là một dịch vụ giúp bạn dễ dàng thiết lập, quản lý và mở rộng quy mô lưu trữ dữ liệu trong bộ nhớ phân tán hoặc môi trường bộ nhớ cache. Nó cung cấp giải pháp bộ nhớ đệm hiệu suất cao, có thể mở rộng và tiết kiệm chi phí. Đồng thời giúp loại bỏ sự phức tạp liên quan đến việc triển khai và quản lý môi trường bộ đệm phân tán.\nElastiCache for Redis có nhiều tính năng:\nTự động phát hiện và phục hồi từ các lỗi node bộ nhớ cache. Redis (đã bật chế độ cluster) hỗ trợ phân vùng dữ liệu của bạn lên đến 500 shard. Vị trí Availability Zone của các node và cluster linh hoạt giúp tăng khả năng chịu lỗi. Tích hợp với các dịch vụ AWS khác như Amazon EC2, Amazon CloudWatch, AWS CloudTrail và Amazon SNS, giúp cung cấp giải pháp lưu vào bộ nhớ đệm trong bộ nhớ được quản lý có hiệu suất cao và bảo mật cao. ElastiCache for Redis quản lý các bản sao lưu, vá phần mềm, tự động phát hiện lỗi và khôi phục. Clusters Thành phần cơ bản của ElastiCache cho Redis được gọi là cluster.\nMột cluster là một tập hợp của một hoặc nhiều node bộ nhớ cache, tất cả đều chạy một instance của phần mềm cache Redis.\nKhi bạn tạo một cluster, bạn chỉ định engine và instance cho tất cả các node để sử dụng. Các instance ElastiCache dành cho Redis của bạn được thiết kế để có thể truy cập thông qua instance Amazon EC2. Bạn có thể tạo và sửa đổi một cluster bằng cách sử dụng AWS CLI, ElastiCache Redis API hoặc AWS Management console.\nMỗi cluster ElastiCache for Redis chạy một instance Redis engine. Mỗi instance engine Redis có các tính năng được hỗ trợ riêng. Ngoài ra, mỗi instance engine Redis có một tập hợp các parameter trong một parameter group kiểm soát hành vi của các cluster.\nKhả năng tính toán và dung lượng bộ nhớ của một cluster được xác định bởi instance hoặc node, class của cluster. Bạn có thể chọn loại node ( node type ) đáp ứng tốt nhất nhu cầu của mình. Nếu nhu cầu của bạn thay đổi theo thời gian, bạn có thể thay đổi node type.\nBạn cũng có thể tận dụng tính năng phân cấp dữ liệu khi xem xét nhu cầu node type của mình. Xếp hạng dữ liệu là một tính năng trong đó một số dữ liệu ít được sử dụng nhất được lưu trữ trên đĩa SSD để giảm thiểu mức sử dụng bộ nhớ trên các ứng dụng có thể chịu được độ trễ.\nLưu trữ node cluster có hai loại: Standard and memory-optimized.\nChúng khác nhau về đặc điểm hiệu suất và giá cả, cho phép bạn điều chỉnh hiệu suất và chi phí lưu trữ theo nhu cầu của mình.\nBạn có thể chạy một cluster trên (VPC). Khi bạn sử dụng VPC, bạn có quyền kiểm soát môi trường mạng ảo của mình. Bạn có thể chọn dải địa chỉ IP của riêng mình, tạo subnet group và định cấu hình danh sách định tuyến và kiểm soát truy cập. ElastiCache quản lý các bản sao lưu, vá phần mềm, tự động phát hiện lỗi và khôi phục.(Không có thêm chi phí để chạy cluster của bạn trong VPC).\nElastiCache nodes Node là khối xây dựng nhỏ nhất của việc triển khai ElastiCache. Một node có thể tồn tại ở dạng cô lập hoặc trong mối quan hệ nào đó với các node khác. Node là một đoạn RAM có kích thước cố định, được gắn vào mạng. Mỗi node chạy một instance của engine và instance đã được chọn khi bạn tạo cluster của mình. Nếu cần, bạn có thể scale các node trong một cluster lên hoặc xuống thành một loại instance khác. Mọi node trong một cluster là cùng một kiểu instance và chạy cùng một engine bộ nhớ cache. Mỗi node bộ nhớ cache có tên và cổng Dịch vụ tên miền (DNS) riêng. ElastiCache for Redis shards Một Redis shard là một nhóm từ một đến sáu node có liên quan. Một Redis cluster (cluster mode disabled) luôn có một shard. Các cluster redis (cluster mode enabled) có thể có tối đa 500 shard, với dữ liệu của bạn được phân vùng trên các shard. Giới hạn node hoặc shard có thể được tăng lên tối đa 500 cho mỗi cluster nếu instance engine Redis là 5.0.6 trở lên.Bạn cần đảm bảo có đủ địa chỉ IP khả dụng để đáp ứng số node gia tăng. "
},
{
	"uri": "/vi/4-sdkelasticache/4.2-connecting-to-elasticache/4.2.1-connecting-to-a-cluster-mode-disabled-cluster/",
	"title": "Kết nối tới một cluster (mode disabled cluster)",
	"tags": [],
	"description": "",
	"content": "Kết nối đến một cluster (cluster mode disable) Tạo một file python có tên ConnectClusterModeDisabled.py.\nSao chép chương trình sau và dán vào file có tên ConnectClusterModeDisabled.py.\nfrom redis import Redis\rimport logging\rlogging.basicConfig(level=logging.INFO)\rredis = Redis(host=\u0026#39;primary.xxx.yyyyyy.zzz1.cache.amazonaws.com\u0026#39;, port=6379, decode_responses=True, ssl=True, username=\u0026#39;myuser\u0026#39;, password=\u0026#39;MyPassword0123456789\u0026#39;)\rif redis.ping():\rlogging.info(\u0026#34;Connected to Redis\u0026#34;) Để chạy chương trình, hãy nhập lệnh sau: python ConnectClusterModeDisabled.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ConnectClusterModeDisabled.py\u0026#34; "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.1-create-a-subnet-group/3.1.1-useconsole/",
	"title": "Sử dụng Console",
	"tags": [],
	"description": "",
	"content": "Tạo subnet group sử dụng Console Đăng nhập vào AWS Management Console và mở ElastiCache console tại https://console.aws.amazon.com/elasticache/. Trong danh sách điều hướng, chọn Subnet Groups.\nChọn Create Subnet Group.\nTrong trình hướng dẫn Create Subnet Group, hãy thực hiện như sau. Khi tất cả các cài đặt như bạn muốn, hãy chọn Create . Trong hộp Name , hãy nhập tên cho nhóm mạng con của bạn.\nTrong hộp Description , hãy nhập mô tả cho nhóm mạng con của bạn.\nTrong hộp VPC ID , chọn Amazon VPC mà bạn đã tạo.\nTrong danh sách Availability Zone và Subnet ID, hãy chọn Availability Zone và Subnet ID của private subnet của bạn, sau đó chọn Add.\nSubnet group mới của bạn xuất hiện trong danh sách Subnet Groups của bảng điều khiển ElastiCache. Ở cuối cửa sổ, bạn có thể chọn tên subnet group để xem chi tiết, chẳng hạn như tất cả subnets được liên kết với group này. "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.2-create-a-clustercluster-mode-disabled/3.2.1-use-console/",
	"title": "Sử dụng Console",
	"tags": [],
	"description": "",
	"content": "Tạo một cluster sử dụng Console Đăng nhập vào AWS Management Console và mở Amazon ElastiCache console tại https://console.aws.amazon.com/elasticache/.\nTừ danh sách ở góc trên bên phải, chọn AWS Region mà bạn muốn khởi chạy cluster này.\nChọn Redis clusters từ ngăn điều hướng.\nChọn Create Redis cluster.\nĐối với Choose a cluster creation method, chọn Configure and create a new cluster\nĐối với Cluster mode, chọn Disabled\nĐiền thông tin phần Cluster info: Trong Name , hãy nhập tên cho cluster của bạn.\nTrong Description, hãy nhập mô tả cho clsuter này.\nĐối với Location, chọn AWS Cloud. Đối với Cluster settings Engine version: chọn 6.2 Port: chọn 6379 Parameter groups: chọn default.redis6.x Node type: chọn cache.r6g.large Number of replicas: chọn 2 Đối với Subnet group settings: Trong Subnet groups chọn Choose existing subnet group và chọn subnet group đã tạo ở bước 3.1 Tạo một subnet group\nTrong Associated subnets, chọn Availability Zone và Subnet ID\nĐối với Availability Zone placements, chọn Specify Availability Zone Chọn Next Đối với Advanced settings: Selected security groups: chọn security group Trong Backup, chọn Enable automatic backups Backup retention period: chọn 1 Backup window: No preference Trong Maintenance: Maintenance window: chọn No preference Topic for Amazon SNS notification: chọn Amazon Resource Name (ARN) đã có Trong Logs: Slow logs: Chọn Enable Log format: chọn Text Log destination type: chọn CloudWatch Logs Log destination: chọn Choose existing log group Log group name: chọn log group name Xem lại và chọn Create Đợi vài phút khởi tạo và kết quả sau khi tạo cluster "
},
{
	"uri": "/vi/2-prerequiste/2.1-create-accesskey/",
	"title": "Tạo AWS Access Key",
	"tags": [],
	"description": "",
	"content": "Tạo khóa truy cập cho người dùng IAM Đăng nhập vào Bảng điều khiển quản lý AWS và mở bảng điều khiển IAM tại bảng điều khiển IAM. Trong thanh điều hướng, chọn Users.\nChọn tên của người dùng có khóa truy cập bạn muốn tạo, sau đó chọn tab Security credentials.\nTrong phần Access keys, chọn Create access key. Để xem access key mới, hãy chọn Show. Thông tin đăng nhập của bạn sẽ trông giống như sau: Access key ID: AKIAIOSFODNN7EXAMPLE\rSecret access key: wJalrXUtnFEMI / K7MDENG / bPxRfiCYEXAMPLEKEY`` Để tải xuống cặp khóa, hãy chọn Download .csv file.\nSau khi bạn tải xuống tệp .csv, chọn Close\n"
},
{
	"uri": "/vi/4-sdkelasticache/4.1-creating-elasticache-clusters-and-users/",
	"title": "Tạo Elasticache cluster",
	"tags": [],
	"description": "",
	"content": "Tổng quan Bài lab sau sử dụng boto3 SDK cho các hoạt động quản lý ElastiCache (cluster hoặc tạo người dùng) và redis-py / redis-py-cluster để xử lý dữ liệu.\nNội dung Tạo một cluster (mode disabled cluster) Tạo một cluster (mode disabled cluster) với TLS và RBAC Tạo một cluster (mode enabled cluster) Tạo một cluster (mode enabled cluster) với TLS và RBAC Kiểm tra nhóm người dùng "
},
{
	"uri": "/vi/4-sdkelasticache/4.1-creating-elasticache-clusters-and-users/4.1.1-create-a-cluster-mode-disabled-cluster/",
	"title": "Tạo một cluster (mode disabled cluster)",
	"tags": [],
	"description": "",
	"content": "Tạo một cluster (cluster mode disable) Tạo file python CreateClusterModeDisabledCluster.py Sao chép chương trình sau và dán vào file CreateClusterModeDisabledCluster.py . import boto3\rimport logging\rlogging.basicConfig(level=logging.INFO)\rclient = boto3.client(\u0026#39;elasticache\u0026#39;)\rdef create_cluster_mode_disabled(CacheNodeType=\u0026#39;cache.t3.small\u0026#39;,EngineVersion=\u0026#39;6.0\u0026#39;,NumCacheClusters=2,ReplicationGroupDescription=\u0026#39;Sample cache cluster\u0026#39;,ReplicationGroupId=None):\r\u0026#34;\u0026#34;\u0026#34;Creates an Elasticache Cluster with cluster mode disabled\rReturns a dictionary with the API response\r:param CacheNodeType: Node type used on the cluster. If not specified, cache.t3.small will be used\rRefer to https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/CacheNodes.SupportedTypes.html for supported node types\r:param EngineVersion: Engine version to be used. If not specified, latest will be used.\r:param NumCacheClusters: Number of nodes in the cluster. Minimum 1 (just a primary node) and maximun 6 (1 primary and 5 replicas).\rIf not specified, cluster will be created with 1 primary and 1 replica.\r:param ReplicationGroupDescription: Description for the cluster.\r:param ReplicationGroupId: Name for the cluster\r:return: dictionary with the API results\r\u0026#34;\u0026#34;\u0026#34;\rif not ReplicationGroupId:\rreturn \u0026#39;ReplicationGroupId parameter is required\u0026#39;\rresponse = client.create_replication_group(\rAutomaticFailoverEnabled=True,\rCacheNodeType=CacheNodeType,\rEngine=\u0026#39;redis\u0026#39;,\rEngineVersion=EngineVersion,\rNumCacheClusters=NumCacheClusters,\rReplicationGroupDescription=ReplicationGroupDescription,\rReplicationGroupId=ReplicationGroupId,\rSnapshotRetentionLimit=30,\r)\rreturn response\rif __name__ == \u0026#39;__main__\u0026#39;:\r# Creates an Elasticace Cluster mode disabled cluster, based on cache.m6g.large nodes, Redis 6, one primary and two replicas\relasticacheResponse = create_cluster_mode_disabled(\r#CacheNodeType=\u0026#39;cache.m6g.large\u0026#39;, EngineVersion=\u0026#39;6.0\u0026#39;,\rNumCacheClusters=3,\rReplicationGroupDescription=\u0026#39;Redis cluster mode disabled with replicas\u0026#39;,\rReplicationGroupId=\u0026#39;redis202104053\u0026#39;\r)\rlogging.info(elasticacheResponse) Kết quả như hình\nĐể chạy chương trình, hãy nhập lệnh sau trên Windows Command Promt: python CreateClusterModeDisabledCluster.py Nếu không chạy được chương trình, thì sử dụng lệnh sau:\npython \u0026#34;đường dẫn file CreateClusterModeDisabledCluster.py\u0026#34; Tạo một cluster (cluster mode disable) với TLS và RBAC Để đảm bảo an ninh, bạn có thể sử dụng Transport Layer Security (TLS) và Role-Based Access Control (RBAC) khi tạo cluster (cluster mode disable). Không giống như Redis AUTH, nơi tất cả các máy khách được xác thực có toàn quyền truy cập replication group nếu mã thông báo của họ được xác thực, RBAC cho phép bạn kiểm soát quyền truy cập cluster thông qua user groups. User groups này được thiết kế như một cách để tổ chức quyền truy cập vào replication groups. Tạo file python tên ClusterModeDisabledWithRBAC.py Sao chép chương trình sau và dán vào file có tên ClusterModeDisabledWithRBAC.py. import boto3\rimport logging\rlogging.basicConfig(level=logging.INFO)\rclient = boto3.client(\u0026#39;elasticache\u0026#39;)\rdef create_cluster_mode_disabled_rbac(CacheNodeType=\u0026#39;cache.t3.small\u0026#39;,EngineVersion=\u0026#39;6.0\u0026#39;,NumCacheClusters=2,ReplicationGroupDescription=\u0026#39;Sample cache cluster\u0026#39;,ReplicationGroupId=None, UserGroupIds=None, SecurityGroupIds=None,CacheSubnetGroupName=None):\r\u0026#34;\u0026#34;\u0026#34;Creates an Elasticache Cluster with cluster mode disabled and RBAC\rReturns a dictionary with the API response\r:param CacheNodeType: Node type used on the cluster. If not specified, cache.t3.small will be used\rRefer to https://docs..amazon.com/AmazonElastiCache/latest/red-ug/CacheNodes.SupportedTypes.html for supported node types\r:param EngineVersion: Engine version to be used. If not specified, latest will be used.\r:param NumCacheClusters: Number of nodes in the cluster. Minimum 1 (just a primary node) and maximun 6 (1 primary and 5 replicas).\rIf not specified, cluster will be created with 1 primary and 1 replica.\r:param ReplicationGroupDescription: Description for the cluster.\r:param ReplicationGroupId: Mandatory name for the cluster.\r:param UserGroupIds: Mandatory list of user groups to be assigned to the cluster.\r:param SecurityGroupIds: List of security groups to be assigned. If not defined, default will be used\r:param CacheSubnetGroupName: subnet group where the cluster will be placed. If not defined, default will be used.\r:return: dictionary with the API results\r\u0026#34;\u0026#34;\u0026#34;\rif not ReplicationGroupId:\rreturn {\u0026#39;Error\u0026#39;: \u0026#39;ReplicationGroupId parameter is required\u0026#39;}\relif not isinstance(UserGroupIds,(list)):\rreturn {\u0026#39;Error\u0026#39;: \u0026#39;UserGroupIds parameter is required and must be a list\u0026#39;}\rparams={\u0026#39;AutomaticFailoverEnabled\u0026#39;: True, \u0026#39;CacheNodeType\u0026#39;: CacheNodeType, \u0026#39;Engine\u0026#39;: \u0026#39;redis\u0026#39;, \u0026#39;EngineVersion\u0026#39;: EngineVersion, \u0026#39;NumCacheClusters\u0026#39;: NumCacheClusters, \u0026#39;ReplicationGroupDescription\u0026#39;: ReplicationGroupDescription, \u0026#39;ReplicationGroupId\u0026#39;: ReplicationGroupId, \u0026#39;SnapshotRetentionLimit\u0026#39;: 30, \u0026#39;TransitEncryptionEnabled\u0026#39;: True, \u0026#39;UserGroupIds\u0026#39;:UserGroupIds\r}\r# defaults will be used if CacheSubnetGroupName or SecurityGroups are not explicit.\rif isinstance(SecurityGroupIds,(list)):\rparams.update({\u0026#39;SecurityGroupIds\u0026#39;:SecurityGroupIds})\rif CacheSubnetGroupName:\rparams.update({\u0026#39;CacheSubnetGroupName\u0026#39;:CacheSubnetGroupName})\rresponse = client.create_replication_group(**params)\rreturn response\rif __name__ == \u0026#39;__main__\u0026#39;:\r# Creates an Elasticace Cluster mode disabled cluster, based on cache.m6g.large nodes, Redis 6, one primary and two replicas.\r# Assigns the existent user group \u0026#34;mygroup\u0026#34; for RBAC authentication\rresponse=create_cluster_mode_disabled_rbac(\rCacheNodeType=\u0026#39;cache.m6g.large\u0026#39;,\rEngineVersion=\u0026#39;6.0\u0026#39;,\rNumCacheClusters=3,\rReplicationGroupDescription=\u0026#39;Redis cluster mode disabled with replicas\u0026#39;,\rReplicationGroupId=\u0026#39;redis202104\u0026#39;,\rUserGroupIds=[\r\u0026#39;mygroup\u0026#39;\r],\rSecurityGroupIds=[\r\u0026#39;sg-7cc73803\u0026#39;\r],\rCacheSubnetGroupName=\u0026#39;default\u0026#39;\r)\rlogging.info(response) Để chạy chương trình, hãy nhập lệnh sau: python ClusterModeDisabledWithRBAC.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ClusterModeDisabledWithRBAC.py\u0026#34; "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.1-create-a-subnet-group/",
	"title": "Tạo subnet group",
	"tags": [],
	"description": "",
	"content": "\rTrước khi bạn tạo một cluster, trước tiên bạn phải tạo một subnet group.\nTổng quan Một cache subnet group là một tập hợp các subnet group mà bạn có thể muốn chỉ định cho cache clusters của mình trong VPC. Khi khởi chạy một cache cluster trong VPC, bạn cần chọn một cache subnet group. Sau đó, ElastiCache sử dụng cache subnet group đó để gán địa chỉ IP trong subnet group đó cho mỗi cache node trong cluster. Khi bạn tạo một subnet group mới, hãy lưu ý số lượng địa chỉ IP khả dụng. Nếu subnet group có rất ít địa chỉ IP khả dụng, bạn có thể bị hạn chế về số lượng node khác mà bạn có thể thêm vào cluster. Để giải quyết vấn đề này, bạn có thể chỉ định nhiều subnet cho một subnet group để bạn có đủ số lượng địa chỉ IP trong Availability Zone của cluster. Qua đó bạn có thể thêm nhiều node hơn vào cluster của mình. Nội dung 3.1.1 Tạo một subnet group sử dụng Console 3.1.2 Tạo một subnet group sử dụng AWS CLI "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.6-deleting-a-cluster/3.6.1-use-console/",
	"title": "Use Console",
	"tags": [],
	"description": "",
	"content": "Quy trình sau đây xóa một cluster đơn lẻ khỏi triển khai của bạn. Để xóa nhiều cluster, hãy lặp lại quy trình cho từng cluster mà bạn muốn xóa. Bạn không cần phải đợi một cluster hoàn thành xóa trước khi bắt đầu quy trình xóa một cluster khác.\nĐể xóa một cluster\nĐăng nhập vào AWS Management Console và mở Amazon ElastiCache console tại https://console.aws.amazon.com/elasticache/.\nTrong ElastiCache console dashboard, chọn Redis clusters. Danh sách tất cả các cluster đang chạy Redis xuất hiện.\nĐể chọn cluster để xóa, hãy chọn tên của cluster từ danh sách các cluster. Trong trường hợp này, tên của cluster bạn đã tạo ở 3.2: Tạo cluster .\nĐối với Actions, hãy chọn Delete.\nTrong màn hình xác nhận Delete Cluster, chọn Delete để xóa cluster hoặc chọn Cancel để giữ cluster. Nếu bạn chọn Delete, trạng thái của cluster sẽ chuyển thành deleting.\nNgay sau khi cluster của bạn không còn được liệt kê trong danh sách các cluster, bạn sẽ ngừng tính phí cho cluster đó.\n"
},
{
	"uri": "/vi/2-prerequiste/2.2-install-aws-cli/",
	"title": "Cài đặt AWS CLI",
	"tags": [],
	"description": "",
	"content": "\rĐể cập nhật cài đặt AWS CLI hiện tại của bạn trên Windows, hãy tải xuống trình cài đặt mới mỗi khi bạn cập nhật để ghi đè lên các phiên bản trước. AWS CLI được cập nhật thường xuyên. Để biết khi nào phiên bản mới nhất được phát hành, hãy xem bảng thay đổi AWS CLI trên GitHub .\nTải xuống và chạy trình cài đặt AWS CLI MSI dành cho Windows (64-bit) Ngoài ra, bạn có thể chạy lệnh **msiexec** trên Windows Command Promt để chạy trình cài đặt MSI.\nmsiexec.exe /i https://awscli.amazonaws.com/AWSCLIV2.msi Để xác nhận cài đặt, hãy mở menu Start , tìm kiếm cmd để mở Windows Command Promt, hãy sử dụng lệnh **aws --version**. aws --version Nếu Windows không thể tìm thấy chương trình, bạn có thể cần phải đóng và mở lại Windows Command Promt để làm mới đường dẫn hoặc thêm AWS CLI vào đường dẫn của bạn .\n"
},
{
	"uri": "/vi/2-prerequiste/",
	"title": "Chuẩn bị",
	"tags": [],
	"description": "",
	"content": "Tổng quan Trước khi thực hành, ta khởi tạo một số mục liên quan sau đây: tạo Access Key, cài đặt và cấu hình AWS CLI.\nNội dung:\n2.1. Tạo AWS Access Key 2.2. Cài đặt AWS CLI 2.3. Cấu hình AWS CLI "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.5-connect-to-the-cluster_s-node/3.5.2--redis-cluster-mode-enabled-cluster-console/",
	"title": "Cluster Mode Enabled",
	"tags": [],
	"description": "",
	"content": "Sử dụng Configuration Endpoint cho cả hoạt động đọc và ghi. Redis xác định node nào của cluster để truy cập.\nQuy trình sau đây trình bày cách tìm và sao chép Redis (cluster mode enabled) cluster endpoints.\nTìm node endpoints for a Redis (cluster mode enabled) cluster Đăng nhập vào AWS Management Console và mở ElastiCache console tại https://console.aws.amazon.com/elasticache/.\nTừ ngăn điều hướng, chọn Redis clusters. Danh sách các cluster đang chạy bất kỳ phiên bản Redis nào sẽ xuất hiện.\nTừ danh sách các cluster, hãy chọn tên cluster của một cluster. Trang shard mở ra.\nChọn tên của shard mà bạn muốn endpoint của node. Danh sách các node của shard xuất hiện với endpoint của mỗi node. Định vị Endpoint column và đọc endpoint cho mỗi node. In-transit encryption not enabled\nclusterName.xxxxxx.regionAndAz.cache.amazonaws.com:port\rrce.ameaqx.use1.cache.amazonaws.com:6379 In-transit encryption enabled\nclustercfg.clusterName.xxxxxx.regionAndAz.cache.amazonaws.com:port\rclustercfg.rce.ameaqx.use1.cache.amazonaws.com:6379 "
},
{
	"uri": "/vi/4-sdkelasticache/4.2-connecting-to-elasticache/4.2.2-connecting-to-a-cluster-mode-enabled-cluster/",
	"title": "Kết nối tới một cluster (mode enabled cluster)",
	"tags": [],
	"description": "",
	"content": "Kết nối đến một cluster (cluster mode enable) Tạo một file python có tên ConnectClusterModeEnabled.py. Sao chép chương trình sau và dán vào file có tên ConnectClusterModeEnabled.py. from rediscluster import RedisCluster\rimport logging\rlogging.basicConfig(level=logging.INFO)\rredis = RedisCluster(startup_nodes=[{\u0026#34;host\u0026#34;: \u0026#34;xxx.yyy.clustercfg.zzz1.cache.amazonaws.com\u0026#34;,\u0026#34;port\u0026#34;: \u0026#34;6379\u0026#34;}], decode_responses=True,skip_full_coverage_check=True)\rif redis.ping():\rlogging.info(\u0026#34;Connected to Redis\u0026#34;) Để chạy chương trình, hãy nhập lệnh sau: python ConnectClusterModeEnabled.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ConnectClusterModeEnabled.py\u0026#34; "
},
{
	"uri": "/vi/4-sdkelasticache/4.2-connecting-to-elasticache/",
	"title": "Kết nối với Elasticache",
	"tags": [],
	"description": "",
	"content": "Tổng quan Bài lab sau sử dụng ứng dụng khách Redis để kết nối với ElastiCache.\nNội dung Kết nối tới một cluster (cluster mode disable) Kết nối tới một cluster (cluster mode enable) "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.2-create-a-clustercluster-mode-disabled/",
	"title": "Tạo cluster (cluster mode disabled)",
	"tags": [],
	"description": "",
	"content": "Tổng quan Trước khi tạo một cluster để sử dụng trong môi trường production, bạn cần xem xét cách bạn sẽ định cấu hình cluster để đáp ứng nhu cầu của mình. Đối với bài lab này, bạn sẽ tạo một cluster với cluster mode disabled và bạn sẽ áp dụng các giá trị cấu hình mặc định.\nCluster bạn tạo sẽ hoạt động và không chạy trong sandbox. Bạn sẽ phải chịu phí sử dụng** ElastiCache standard** cho ví dụ cho đến khi bạn xóa nó. Tổng số phí sẽ tối thiểu (thường ít hơn một đô la) nếu bạn hoàn thành bài tập được mô tả ở đây trong một lần và xóa cluster của bạn khi bạn hoàn thành.\nCluster của bạn được khởi chạy trong một Virtual Private Cloud (VPC) dựa trên dịch vụ Amazon VPC.\nNội dung 3.2.1 Tạo một cluster sử dụng Console 3.2.2 Tạo một cluster sử dụng AWS CLI "
},
{
	"uri": "/vi/4-sdkelasticache/4.1-creating-elasticache-clusters-and-users/4.1.2-create-a-cluster-mode-enabled-cluster/",
	"title": "Tạo một cluster (mode enabled cluster)",
	"tags": [],
	"description": "",
	"content": "Tạo một cluster (cluster mode enable) Tạo một file python có tên ClusterModeEnabled.py Sao chép chương trình sau và dán vào tệp có tên ClusterModeEnabled.py. import boto3\rimport logging\rlogging.basicConfig(level=logging.INFO)\rclient = boto3.client(\u0026#39;elasticache\u0026#39;)\rdef create_cluster_mode_enabled(CacheNodeType=\u0026#39;cache.t3.small\u0026#39;,EngineVersion=\u0026#39;6.0\u0026#39;,NumNodeGroups=1,ReplicasPerNodeGroup=1, ReplicationGroupDescription=\u0026#39;Sample cache with cluster mode enabled\u0026#39;,ReplicationGroupId=None):\r\u0026#34;\u0026#34;\u0026#34;Creates an Elasticache Cluster with cluster mode enabled\rReturns a dictionary with the API response\r:param CacheNodeType: Node type used on the cluster. If not specified, cache.t3.small will be used\rRefer to https://docs..amazon.com/AmazonElastiCache/latest/red-ug/CacheNodes.SupportedTypes.html for supported node types\r:param EngineVersion: Engine version to be used. If not specified, latest will be used.\r:param NumNodeGroups: Number of shards in the cluster. Minimum 1 and maximun 90.\rIf not specified, cluster will be created with 1 shard.\r:param ReplicasPerNodeGroup: Number of replicas per shard. If not specified 1 replica per shard will be created.\r:param ReplicationGroupDescription: Description for the cluster.\r:param ReplicationGroupId: Name for the cluster\r:return: dictionary with the API results\r\u0026#34;\u0026#34;\u0026#34;\rif not ReplicationGroupId:\rreturn \u0026#39;ReplicationGroupId parameter is required\u0026#39;\rresponse = client.create_replication_group(\rAutomaticFailoverEnabled=True,\rCacheNodeType=CacheNodeType,\rEngine=\u0026#39;redis\u0026#39;,\rEngineVersion=EngineVersion,\rReplicationGroupDescription=ReplicationGroupDescription,\rReplicationGroupId=ReplicationGroupId,\r# Creates a cluster mode enabled cluster with 1 shard(NumNodeGroups), 1 primary node (implicit) and 2 replicas (replicasPerNodeGroup)\rNumNodeGroups=NumNodeGroups,\rReplicasPerNodeGroup=ReplicasPerNodeGroup,\rCacheParameterGroupName=\u0026#39;default.redis6.0.cluster.on\u0026#39;\r)\rreturn response\r# Creates a cluster mode enabled response = create_cluster_mode_enabled(\rCacheNodeType=\u0026#39;cache.m6g.large\u0026#39;,\rEngineVersion=\u0026#39;6.0\u0026#39;,\rReplicationGroupDescription=\u0026#39;Redis cluster mode enabled with replicas\u0026#39;,\rReplicationGroupId=\u0026#39;redis20210\u0026#39;,\r# Creates a cluster mode enabled cluster with 1 shard(NumNodeGroups), 1 primary (implicit) and 2 replicas (replicasPerNodeGroup)\rNumNodeGroups=2,\rReplicasPerNodeGroup=1,\r)\rlogging.info(response) Để chạy chương trình, hãy nhập lệnh sau: python ClusterModeEnabled.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ClusterModeEnabled.py\u0026#34; Tạo một cluster (cluster mode enable) với TLS và RBAC Để đảm bảo tính bảo mật, bạn có thể sử dụng Transport Layer Security (TLS) và Role-Based Access Control (RBAC) khi tạo một cluster (cluster mode enable). Không giống như Redis AUTH, nơi tất cả các máy khách được xác thực có toàn quyền truy cập replication group nếu mã thông báo của họ được xác thực, RBAC cho phép bạn kiểm soát quyền truy cập cluster thông qua các user group. User groups này được thiết kế như một cách để tổ chức quyền truy cập vào các replication group.\nTạo một file python có tên ClusterModeEnabledWithRBAC.py\nSao chép chương trình sau và dán vào file có tên ClusterModeEnabledWithRBAC.py.\nimport boto3\rimport logging\rlogging.basicConfig(level=logging.INFO)\rclient = boto3.client(\u0026#39;elasticache\u0026#39;)\rdef create_cluster_mode_enabled(CacheNodeType=\u0026#39;cache.t3.small\u0026#39;,EngineVersion=\u0026#39;6.0\u0026#39;,NumNodeGroups=1,ReplicasPerNodeGroup=1, ReplicationGroupDescription=\u0026#39;Sample cache with cluster mode enabled\u0026#39;,ReplicationGroupId=None,UserGroupIds=None, SecurityGroupIds=None,CacheSubnetGroupName=None,CacheParameterGroupName=\u0026#39;default.redis6.0.cluster.on\u0026#39;):\r\u0026#34;\u0026#34;\u0026#34;Creates an Elasticache Cluster with cluster mode enabled and RBAC\rReturns a dictionary with the API response\r:param CacheNodeType: Node type used on the cluster. If not specified, cache.t3.small will be used\rRefer to https://docs..amazon.com/AmazonElastiCache/latest/red-ug/CacheNodes.SupportedTypes.html for supported node types\r:param EngineVersion: Engine version to be used. If not specified, latest will be used.\r:param NumNodeGroups: Number of shards in the cluster. Minimum 1 and maximun 90.\rIf not specified, cluster will be created with 1 shard.\r:param ReplicasPerNodeGroup: Number of replicas per shard. If not specified 1 replica per shard will be created.\r:param ReplicationGroupDescription: Description for the cluster.\r:param ReplicationGroupId: Name for the cluster.\r:param CacheParameterGroupName: Parameter group to be used. Must be compatible with the engine version and cluster mode enabled.\r:return: dictionary with the API results\r\u0026#34;\u0026#34;\u0026#34;\rif not ReplicationGroupId:\rreturn \u0026#39;ReplicationGroupId parameter is required\u0026#39;\relif not isinstance(UserGroupIds,(list)):\rreturn {\u0026#39;Error\u0026#39;: \u0026#39;UserGroupIds parameter is required and must be a list\u0026#39;}\rparams={\u0026#39;AutomaticFailoverEnabled\u0026#39;: True, \u0026#39;CacheNodeType\u0026#39;: CacheNodeType, \u0026#39;Engine\u0026#39;: \u0026#39;redis\u0026#39;, \u0026#39;EngineVersion\u0026#39;: EngineVersion, \u0026#39;ReplicationGroupDescription\u0026#39;: ReplicationGroupDescription, \u0026#39;ReplicationGroupId\u0026#39;: ReplicationGroupId, \u0026#39;SnapshotRetentionLimit\u0026#39;: 30, \u0026#39;TransitEncryptionEnabled\u0026#39;: True, \u0026#39;UserGroupIds\u0026#39;:UserGroupIds,\r\u0026#39;NumNodeGroups\u0026#39;: NumNodeGroups,\r\u0026#39;ReplicasPerNodeGroup\u0026#39;: ReplicasPerNodeGroup,\r\u0026#39;CacheParameterGroupName\u0026#39;: CacheParameterGroupName\r}\r# defaults will be used if CacheSubnetGroupName or SecurityGroups are not explicit.\rif isinstance(SecurityGroupIds,(list)):\rparams.update({\u0026#39;SecurityGroupIds\u0026#39;:SecurityGroupIds})\rif CacheSubnetGroupName:\rparams.update({\u0026#39;CacheSubnetGroupName\u0026#39;:CacheSubnetGroupName})\rresponse = client.create_replication_group(**params)\rreturn response\rif __name__ == \u0026#39;__main__\u0026#39;:\r# Creates a cluster mode enabled cluster\rresponse = create_cluster_mode_enabled(\rCacheNodeType=\u0026#39;cache.m6g.large\u0026#39;,\rEngineVersion=\u0026#39;6.0\u0026#39;,\rReplicationGroupDescription=\u0026#39;Redis cluster mode enabled with replicas\u0026#39;,\rReplicationGroupId=\u0026#39;redis2021\u0026#39;,\r# Creates a cluster mode enabled cluster with 1 shard(NumNodeGroups), 1 primary (implicit) and 2 replicas (replicasPerNodeGroup)\rNumNodeGroups=2,\rReplicasPerNodeGroup=1,\rUserGroupIds=[\r\u0026#39;mygroup\u0026#39;\r],\rSecurityGroupIds=[\r\u0026#39;sg-7cc73803\u0026#39;\r],\rCacheSubnetGroupName=\u0026#39;default\u0026#39;\r)\rlogging.info(response) Để chạy chương trình, hãy nhập lệnh sau: python ClusterModeEnabledWithRBAC.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ClusterModeEnabledWithRBAC.py\u0026#34; "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.1-create-a-subnet-group/3.1.2-useawscli/",
	"title": "Use AWS CLI",
	"tags": [],
	"description": "",
	"content": "Tạo subnet group sử dụng AWS CLI Tại dấu nhắc lệnh, sử dụng lệnh **create-cache-subnet-group** để tạo một subnet group. For Linux, macOS, or Unix: aws elasticache create-cache-subnet-group \\\r--cache-subnet-group-name mysubnetgroup \\\r--cache-subnet-group-description \u0026#34;Testing\u0026#34; \\\r--subnet-ids subnet-53df9c3a For Windows: aws elasticache create-cache-subnet-group ^\r--cache-subnet-group-name mysubnetgroup ^\r--cache-subnet-group-description \u0026#34;Testing\u0026#34; ^\r--subnet-ids subnet-53df9c3a Lệnh này sẽ tạo ra kết quả tương tự như sau: {\r\u0026#34;CacheSubnetGroup\u0026#34;: {\r\u0026#34;VpcId\u0026#34;: \u0026#34;vpc-37c3cd17\u0026#34;, \u0026#34;CacheSubnetGroupDescription\u0026#34;: \u0026#34;Testing\u0026#34;, \u0026#34;Subnets\u0026#34;: [\r{\r\u0026#34;SubnetIdentifier\u0026#34;: \u0026#34;subnet-53df9c3a\u0026#34;, \u0026#34;SubnetAvailabilityZone\u0026#34;: {\r\u0026#34;Name\u0026#34;: \u0026#34;us-west-2a\u0026#34;\r}\r}\r], \u0026#34;CacheSubnetGroupName\u0026#34;: \u0026#34;mysubnetgroup\u0026#34;\r}\r} "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.2-create-a-clustercluster-mode-disabled/3.2.2-use-aws-cli/",
	"title": "Use AWS CLI",
	"tags": [],
	"description": "",
	"content": "Tạo một cluster bằng AWS CLI Mã CLI sau đây tạo một Redis (cluster mode disabled) cache cluster không có bản sao.\nĐối với Linux, macOS hoặc Unix:\naws elasticache create-cache-cluster \\\r--cache-cluster-id my-cluster \\\r--cache-node-type cache.r4.large \\\r--engine redis \\\r--engine-version 3.2.4 \\\r--num-cache-nodes 1 \\\r--cache-parameter-group default.redis3.2 \\\r--snapshot-arns arn:aws:s3:::my_bucket/snapshot.rdb Đối với Windows:\naws elasticache create-cache-cluster ^\r--cache-cluster-id my-cluster ^\r--cache-node-type cache.r4.large ^\r--engine redis ^\r--engine-version 3.2.4 ^\r--num-cache-nodes 1 ^\r--cache-parameter-group default.redis3.2 ^\r--snapshot-arns arn:aws:s3:::my_bucket/snapshot.rdb "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.6-deleting-a-cluster/3.6.2-use-aws-cli/",
	"title": "Use AWS CLI",
	"tags": [],
	"description": "",
	"content": "Đoạn mã sau sẽ xóa cache cluster my-cluster. Trong trường hợp này, hãy thay thế my-cluster bằng tên của cụm bạn đã tạo ở 3.2: Tạo cluster.\naws elasticache delete-cache-cluster --cache-cluster-id my-cluster Hành động delete-cache-cluster CLI chỉ xóa một cache cluster. Để xóa nhiều cache cluster, hãy gọi delete-cache-cluster từng cache cluster mà bạn muốn xóa. Bạn không cần phải đợi một cache cluster hoàn tất việc xóa trước khi xóa một cache cluster khác.\nĐối với Linux, macOS hoặc Unix:\naws elasticache delete-cache-cluster \\\r--cache-cluster-id my-cluster \\\r--region us-east-2 Đối với Windows:\naws elasticache delete-cache-cluster ^\r--cache-cluster-id my-cluster ^\r--region us-east-2 "
},
{
	"uri": "/vi/2-prerequiste/2.3-configure-aws-cli/",
	"title": "Cấu hình AWS CLI",
	"tags": [],
	"description": "",
	"content": "Giao diện dòng lệnh AWS (AWS CLI) là một công cụ mã nguồn mở cho phép bạn tương tác với các dịch vụ AWS bằng cách sử dụng các lệnh trong trình bao dòng lệnh của bạn. Với cấu hình tối thiểu, AWS CLI cho phép bạn bắt đầu chạy các lệnh triển khai chức năng tương đương với chức năng được cung cấp bởi Bảng điều khiển quản lý AWS dựa trên trình duyệt từ dấu nhắc lệnh trong chương trình đầu cuối của bạn:\nLinux shell - Sử dụng các chương trình shell phổ biến như bash, zsh, và tcsh để chạy các lệnh trong Linux hoặc macOS.\nWindows command line - Trên Windows, chạy lệnh tại dấu nhắc lệnh Windows hoặc trong PowerShell.\nRemotely - Chạy lệnh trên Amazon Elastic Compute Cloud (Amazon EC2) thông qua chương trình đầu cuối từ xa như PuTTY hoặc SSH hoặc với AWS Systems Manager.\nCác bước cấu hình Giao diện dòng lệnh AWS (AWS CLI):\nNhập dòng lệnh aws configure tại Windows Command Promt, sau đó nhấn Enter .\nAWS CLI xuất ra các dòng văn bản, nhập các thông tin sau:\nAWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE\rAWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\rDefault region name [None]: us-west-2\rDefault output format [None]: ENTER Hình ảnh minh họa: "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.5-connect-to-the-cluster_s-node/3.5.3-finding-endpoints-aws-cli/",
	"title": "Endpoints use AWS CLI",
	"tags": [],
	"description": "",
	"content": "Bạn có thể sử dụng AWS CLI cho Amazon ElastiCache để khám phá các endpoint cho các node, cluster và replication groups.\nTìm endpoint cho node và cluster (AWS CLI) Tìm endpoint cho các nhóm sao chép (AWS CLI) Tìm Endpoints for Nodes and Clusters (AWS CLI) Bạn có thể sử dụng AWS CLI để khám phá các endpoint cho một cluster và các node của nó bằng lệnh describe-cache-clusters. Đối với các cluster Redis, lệnh trả về endpoint của cluster. Nếu bạn bao gồm tham số tùy chọn --show-cache-node-info, lệnh cũng sẽ trả về endpoint của các node riêng lẻ trong cluster.\nLệnh sau lấy thông tin cluster cho single-node Redis (cluster mode disabled) cluster mycluster.\nĐối với Linux, macOS hoặc Unix: aws elasticache describe-cache-clusters \\\r--cache-cluster-id redis-cluster \\\r--show-cache-node-info Đối với Windows: aws elasticache describe-cache-clusters ^\r--cache-cluster-id redis-cluster ^\r--show-cache-node-info Đầu ra từ thao tác trên sẽ giống như thế này (định dạng JSON).\n{\r\u0026#34;CacheClusters\u0026#34;: [\r{\r\u0026#34;CacheClusterStatus\u0026#34;: \u0026#34;available\u0026#34;,\r\u0026#34;SecurityGroups\u0026#34;: [\r{\r\u0026#34;SecurityGroupId\u0026#34;: \u0026#34;sg-77186e0d\u0026#34;,\r\u0026#34;Status\u0026#34;: \u0026#34;active\u0026#34;\r}\r],\r\u0026#34;CacheNodes\u0026#34;: [\r{\r\u0026#34;CustomerAvailabilityZone\u0026#34;: \u0026#34;us-east-1b\u0026#34;,\r\u0026#34;CacheNodeCreateTime\u0026#34;: \u0026#34;2018-04-25T18:19:28.241Z\u0026#34;,\r\u0026#34;CacheNodeStatus\u0026#34;: \u0026#34;available\u0026#34;,\r\u0026#34;CacheNodeId\u0026#34;: \u0026#34;0001\u0026#34;,\r\u0026#34;Endpoint\u0026#34;: {\r\u0026#34;Address\u0026#34;: \u0026#34;redis-cluster.ameaqx.0001.use1.cache.amazonaws.com\u0026#34;,\r\u0026#34;Port\u0026#34;: 6379\r},\r\u0026#34;ParameterGroupStatus\u0026#34;: \u0026#34;in-sync\u0026#34;\r}\r],\r\u0026#34;AtRestEncryptionEnabled\u0026#34;: false,\r\u0026#34;CacheClusterId\u0026#34;: \u0026#34;redis-cluster\u0026#34;,\r\u0026#34;TransitEncryptionEnabled\u0026#34;: false,\r\u0026#34;CacheParameterGroup\u0026#34;: {\r\u0026#34;ParameterApplyStatus\u0026#34;: \u0026#34;in-sync\u0026#34;,\r\u0026#34;CacheNodeIdsToReboot\u0026#34;: [],\r\u0026#34;CacheParameterGroupName\u0026#34;: \u0026#34;default.redis3.2\u0026#34;\r},\r\u0026#34;NumCacheNodes\u0026#34;: 1,\r\u0026#34;PreferredAvailabilityZone\u0026#34;: \u0026#34;us-east-1b\u0026#34;,\r\u0026#34;AutoMinorVersionUpgrade\u0026#34;: true,\r\u0026#34;Engine\u0026#34;: \u0026#34;redis\u0026#34;,\r\u0026#34;AuthTokenEnabled\u0026#34;: false,\r\u0026#34;PendingModifiedValues\u0026#34;: {},\r\u0026#34;PreferredMaintenanceWindow\u0026#34;: \u0026#34;tue:08:30-tue:09:30\u0026#34;,\r\u0026#34;CacheSecurityGroups\u0026#34;: [],\r\u0026#34;CacheSubnetGroupName\u0026#34;: \u0026#34;default\u0026#34;,\r\u0026#34;CacheNodeType\u0026#34;: \u0026#34;cache.t2.small\u0026#34;,\r\u0026#34;DataTiering\u0026#34;: \u0026#34;disabled\u0026#34;\r\u0026#34;EngineVersion\u0026#34;: \u0026#34;3.2.10\u0026#34;,\r\u0026#34;ClientDownloadLandingPage\u0026#34;: \u0026#34;https://console.aws.amazon.com/elasticache/home#client-download:\u0026#34;,\r\u0026#34;CacheClusterCreateTime\u0026#34;: \u0026#34;2018-04-25T18:19:28.241Z\u0026#34;\r}\r]\r} Finding the Endpoints for Replication Groups (AWS CLI) Bạn có thể sử dụng AWS CLI để khám phá các endpoint cho một replication group và các cluster của nó bằng lệnh describe-replication-groups. Lệnh trả về primary endpoint của replication group và danh sách tất cả các cluster (node) trong replication group với endpoint của chúng, cùng với reader endpoint.\nThao tác sau đây truy xuất primary endpoint và reader endpoint của replication group myreplgroup. Sử dụng primary endpoint cho tất cả các hoạt động ghi.\naws elasticache describe-replication-groups \\\r--replication-group-id myreplgroup Đối với Windows:\naws elasticache describe-replication-groups ^\r--replication-group-id myreplgroup Đầu ra từ thao tác này sẽ trông giống như thế này (định dạng JSON).\n{\r\u0026#34;ReplicationGroups\u0026#34;: [\r{\r\u0026#34;Status\u0026#34;: \u0026#34;available\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;test\u0026#34;, \u0026#34;NodeGroups\u0026#34;: [\r{\r\u0026#34;Status\u0026#34;: \u0026#34;available\u0026#34;, \u0026#34;NodeGroupMembers\u0026#34;: [\r{\r\u0026#34;CurrentRole\u0026#34;: \u0026#34;primary\u0026#34;, \u0026#34;PreferredAvailabilityZone\u0026#34;: \u0026#34;us-west-2a\u0026#34;, \u0026#34;CacheNodeId\u0026#34;: \u0026#34;0001\u0026#34;, \u0026#34;ReadEndpoint\u0026#34;: {\r\u0026#34;Port\u0026#34;: 6379, \u0026#34;Address\u0026#34;: \u0026#34;myreplgroup-001.1abc4d.0001.usw2.cache.amazonaws.com\u0026#34;\r}, \u0026#34;CacheClusterId\u0026#34;: \u0026#34;myreplgroup-001\u0026#34;\r}, {\r\u0026#34;CurrentRole\u0026#34;: \u0026#34;replica\u0026#34;, \u0026#34;PreferredAvailabilityZone\u0026#34;: \u0026#34;us-west-2b\u0026#34;, \u0026#34;CacheNodeId\u0026#34;: \u0026#34;0001\u0026#34;, \u0026#34;ReadEndpoint\u0026#34;: {\r\u0026#34;Port\u0026#34;: 6379, \u0026#34;Address\u0026#34;: \u0026#34;myreplgroup-002.1abc4d.0001.usw2.cache.amazonaws.com\u0026#34;\r}, \u0026#34;CacheClusterId\u0026#34;: \u0026#34;myreplgroup-002\u0026#34;\r}, {\r\u0026#34;CurrentRole\u0026#34;: \u0026#34;replica\u0026#34;, \u0026#34;PreferredAvailabilityZone\u0026#34;: \u0026#34;us-west-2c\u0026#34;, \u0026#34;CacheNodeId\u0026#34;: \u0026#34;0001\u0026#34;, \u0026#34;ReadEndpoint\u0026#34;: {\r\u0026#34;Port\u0026#34;: 6379, \u0026#34;Address\u0026#34;: \u0026#34;myreplgroup-003.1abc4d.0001.usw2.cache.amazonaws.com\u0026#34;\r}, \u0026#34;CacheClusterId\u0026#34;: \u0026#34;myreplgroup-003\u0026#34;\r}\r], \u0026#34;NodeGroupId\u0026#34;: \u0026#34;0001\u0026#34;, \u0026#34;PrimaryEndpoint\u0026#34;: {\r\u0026#34;Port\u0026#34;: 6379, \u0026#34;Address\u0026#34;: \u0026#34;myreplgroup.1abc4d.ng.0001.usw2.cache.amazonaws.com\u0026#34;\r},\r\u0026#34;ReaderEndpoint\u0026#34;: {\r\u0026#34;Port\u0026#34;: 6379, \u0026#34;Address\u0026#34;: \u0026#34;myreplgroup-ro.1abc4d.ng.0001.usw2.cache.amazonaws.com\u0026#34;\r}\r}\r], \u0026#34;ReplicationGroupId\u0026#34;: \u0026#34;myreplgroup\u0026#34;, \u0026#34;AutomaticFailover\u0026#34;: \u0026#34;enabled\u0026#34;, \u0026#34;SnapshottingClusterId\u0026#34;: \u0026#34;myreplgroup-002\u0026#34;, \u0026#34;MemberClusters\u0026#34;: [\r\u0026#34;myreplgroup-001\u0026#34;, \u0026#34;myreplgroup-002\u0026#34;, \u0026#34;myreplgroup-003\u0026#34;\r], \u0026#34;PendingModifiedValues\u0026#34;: {}\r}\r]\r} "
},
{
	"uri": "/vi/4-sdkelasticache/4.1-creating-elasticache-clusters-and-users/4.1.3-check-if-users/",
	"title": "Kiểm tra nhóm người dùng",
	"tags": [],
	"description": "",
	"content": "Với RBAC, bạn tạo người dùng và gán cho họ các quyền cụ thể bằng cách sử dụng một chuỗi truy cập. Bạn chỉ định người dùng vào các nhóm người dùng phù hợp với một vai trò cụ thể (quản trị viên, nguồn nhân lực) sau đó được triển khai cho một hoặc nhiều ElastiCache for Redis replication groups. Bằng cách này, bạn có thể thiết lập ranh giới bảo mật giữa các máy khách sử dụng cùng một nhóm hoặc nhóm sao chép Redis và ngăn các máy khách truy cập dữ liệu của nhau.\nTạo một file python có tên UserAndUserGroups.py Sao chép chương trình sau và dán vào file có tên UserAndUserGroups.py. import boto3\rimport logging\rlogging.basicConfig(level=logging.INFO)\rclient = boto3.client(\u0026#39;elasticache\u0026#39;)\rdef check_user_exists(UserId):\r\u0026#34;\u0026#34;\u0026#34;Checks if UserId exists\rReturns True if UserId exists, otherwise False\r:param UserId: Elasticache User ID\r:return: True|False\r\u0026#34;\u0026#34;\u0026#34;\rtry:\rresponse = client.describe_users(\rUserId=UserId,\r)\rif response[\u0026#39;Users\u0026#39;][0][\u0026#39;UserId\u0026#39;].lower() == UserId.lower():\rreturn True\rexcept Exception as e:\rif e.response[\u0026#39;Error\u0026#39;][\u0026#39;Code\u0026#39;] == \u0026#39;UserNotFound\u0026#39;:\rlogging.info(e.response[\u0026#39;Error\u0026#39;])\rreturn False\relse:\rraise\rdef check_group_exists(UserGroupId):\r\u0026#34;\u0026#34;\u0026#34;Checks if UserGroupID exists\rReturns True if Group ID exists, otherwise False\r:param UserGroupId: Elasticache User ID\r:return: True|False\r\u0026#34;\u0026#34;\u0026#34;\rtry:\rresponse = client.describe_user_groups(\rUserGroupId=UserGroupId\r)\rif response[\u0026#39;UserGroups\u0026#39;][0][\u0026#39;UserGroupId\u0026#39;].lower() == UserGroupId.lower():\rreturn True\rexcept Exception as e:\rif e.response[\u0026#39;Error\u0026#39;][\u0026#39;Code\u0026#39;] == \u0026#39;UserGroupNotFound\u0026#39;:\rlogging.info(e.response[\u0026#39;Error\u0026#39;])\rreturn False\relse:\rraise\rdef create_user(UserId=None,UserName=None,Password=None,AccessString=None):\r\u0026#34;\u0026#34;\u0026#34;Creates a new user\rReturns the ARN for the newly created user or the error message\r:param UserId: Elasticache user ID. User IDs must be unique\r:param UserName: Elasticache user name. Elasticache allows multiple users with the same name as long as the associated user ID is unique.\r:param Password: Password for user. Must have at least 16 chars.\r:param AccessString: Access string with the permissions for the user. For details refer to https://docs..amazon.com/AmazonElastiCache/latest/red-ug/Clusters.RBAC.html#Access-string\r:return: user ARN\r\u0026#34;\u0026#34;\u0026#34;\rtry:\rresponse = client.create_user(\rUserId=UserId,\rUserName=UserName,\rEngine=\u0026#39;Redis\u0026#39;,\rPasswords=[Password],\rAccessString=AccessString,\rNoPasswordRequired=False\r)\rreturn response[\u0026#39;ARN\u0026#39;]\rexcept Exception as e:\rlogging.info(e.response[\u0026#39;Error\u0026#39;])\rreturn e.response[\u0026#39;Error\u0026#39;]\rdef create_group(UserGroupId=None, UserIds=None):\r\u0026#34;\u0026#34;\u0026#34;Creates a new group.\rA default user is required (mandatory) and should be specified in the UserIds list\rReturn: Group ARN\r:param UserIds: List with user IDs to be associated with the new group. A default user is required\r:param UserGroupId: The ID (name) for the group\r:return: Group ARN\r\u0026#34;\u0026#34;\u0026#34;\rtry:\rresponse = client.create_user_group(\rUserGroupId=UserGroupId,\rEngine=\u0026#39;Redis\u0026#39;,\rUserIds=UserIds\r)\rreturn response[\u0026#39;ARN\u0026#39;]\rexcept Exception as e:\rlogging.info(e.response[\u0026#39;Error\u0026#39;])\rif __name__ == \u0026#39;__main__\u0026#39;:\rgroupName=\u0026#39;mygroup2\u0026#39;\ruserName = \u0026#39;myuser2\u0026#39;\ruserId=groupName+\u0026#39;-\u0026#39;+userName\r# Creates a new user if the user ID does not exist.\rfor tmpUserId,tmpUserName in [ (userId,userName), (groupName+\u0026#39;-default\u0026#39;,\u0026#39;default\u0026#39;)]:\rif not check_user_exists(tmpUserId):\rresponse=create_user(UserId=tmpUserId, UserName=tmpUserName,Password=\u0026#39;MyStrongPasswordWithNumbers\u0026#39;,AccessString=\u0026#39;on ~* +@all\u0026#39;)\rlogging.info(response)\r# assigns the new user ID to the user group\rif not check_group_exists(groupName):\rUserIds = [ userId , groupName+\u0026#39;-default\u0026#39;]\rresponse=create_group(UserGroupId=groupName,UserIds=UserIds)\rlogging.info(response) Để chạy chương trình, hãy nhập lệnh sau: python UserAndUserGroups.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file UserAndUserGroups.py\u0026#34; "
},
{
	"uri": "/vi/4-sdkelasticache/4.3-set-and-get-strings/",
	"title": "Set and Get strings",
	"tags": [],
	"description": "",
	"content": "Set and Get strings Tạo một file python có tên ConnectClusterModeEnabled.py. Sao chép chương trình sau và dán vào file có tên ConnectClusterModeEnabled.py. import time\rimport logging\rlogging.basicConfig(level=logging.INFO,format=\u0026#39;%(asctime)s: %(message)s\u0026#39;)\rkeyName=\u0026#39;mykey\u0026#39;\rcurrTime=time.ctime(time.time())\r# Set the key \u0026#39;mykey\u0026#39; with the current date and time as value. # The Key will expire and removed from cache in 60 seconds.\rredis.set(keyName, currTime, ex=60)\r# Sleep just for better illustration of TTL (expiration) value\rtime.sleep(5)\r# Retrieve the key value and current TTL\rkeyValue=redis.get(keyName)\rkeyTTL=redis.ttl(keyName)\rlogging.info(\u0026#34;Key {} was set at {} and has {} seconds until expired\u0026#34;.format(keyName, keyValue, keyTTL)) Để chạy chương trình, hãy nhập lệnh sau: python SetAndGetStrings.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file SetAndGetStrings.py\u0026#34; "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.3-create-a-clustercluster-mode-enabled/",
	"title": "Tạo cluster(cluster mode enabled)",
	"tags": [],
	"description": "",
	"content": "Tạo một Redis (cluster mode enabled) cluster sử dụng ElastiCache console Đăng nhập vào AWS Management Console và mở Amazon ElastiCache console tại https://console.aws.amazon.com/elasticache\nChọn Redis cluster từ ngăn điều hướng.\nChọn Create Redis cluster.\nĐối với Cluster settings, hoàn thành các lựa chọn sau: Trong Choose a cluster creation method, chọn Configure and create a new cluster Đối với Cluster mode, chọn Enabled Đối với Cluster info, hoàn thành nhập các thông tin sau: Trong Name, nhập tên cluster bạn muốn tạo.( Ví dụ: my-cluster-enable) Trong Description, nhập nội dung mô tả cluster của bạn.(Ví dụ: create cluster enable) Đối với Location, chọn AWS Cloud Đối với *Cluster settings, hoàn thành các lựa chọn sau: Trong Engine version, chọn 6.2 Trong Port, chọn 6379 Trong Parameter groups, chọn default.redis6.x.cluster.on Trong Node type, chọn cache.r6g.large Trong Number of shards, chọn 3 Trong Replicas per shard, chọn 2 Đối với Subnet group settings, hoàn thành nhập nội dung sau: Trong Subnet groups, chọn Choose existing subnet group Sau đó chọn subnet group đã tạo 3.1 Tạo một subnet group Trong Associated subnets, chọn Availability Zone và Subnet ID Đối với Availability Zone placements, hoàn thành các thông tin sau: Trong Slots and keyspaces, chọn Equal distribution Trong Availability Zone placements, chọn Specify Availability Zones Chọn Next Đối với Advanced settings, hoàn thành các lựa chọn sau: Trong Selected security groups, chọn security group mặc định Đối với Backup, hoàn thành các lựa chọn sau: Chọn Enable automatic backups Trong Backup retention period, chọn 1 Trong Backup window, chọn No preference Đối với Maintenance, hoàn thành các lựa chọn sau: Trong Maintenance window, chọn No preference Phần Topic for Amazon SNS notification, chọn Amazon Resource Name (ARN) Đối với Logs, hoàn thành các lựa chọn sau: Trong Slow logs, chọn Enable Trong Log format, chọn Text Trong Log destination type, chọn CloudWatch Logs Trong Log destination, chọn Choose existing log group Trong Log group name, chọn tên log đã tạo Chọn Next. Xem lại và chọn Create Sau vài phút khởi tạo và kết qủa tạo cluster(cluster mode enable) "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/",
	"title": "Tạo ElastiCache cluster",
	"tags": [],
	"description": "",
	"content": "Nội dung Tạo một subnet group Tạo một cluster (cluster-mode-disabled) Tạo một cluster (cluster-mode-enabled) Cấp quyền truy cập cluster Kết nối các node của cluster Xóa một cluster "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.4-grantaccesstocluster/",
	"title": "Cấp quyền truy cập vào cluster",
	"tags": [],
	"description": "",
	"content": "\rTất cả các cluster ElastiCache được thiết kế để có thể truy cập từ phiên bản Amazon EC2. Tình huống phổ biến nhất là truy cập một cluster ElastiCache từ một phiên bản Amazon EC2 trong cùng Amazon Virtual Private Cloud (Amazon VPC), đây sẽ là trường hợp cho bài lab này.\nTheo mặc định, quyền truy cập mạng vào cluster của bạn bị giới hạn ở tài khoản người dùng đã được sử dụng để tạo nó. Trước khi bạn có thể kết nối với một cluster từ phiên bản EC2, bạn phải cho phép phiên bản EC2 truy cập vào cluster. Các bước bắt buộc phụ thuộc vào việc bạn khởi chạy cluster của mình vào EC2-VPC hay EC2-Classic.\nTrường hợp sử dụng phổ biến nhất là khi một ứng dụng được triển khai trên phiên bản EC2 cần kết nối với một cluster trong cùng một VPC. Cách đơn giản nhất để quản lý quyền truy cập giữa các phiên bản và cluster EC2 trong cùng một VPC là thực hiện như sau:\nTạo Security Group VPC cho cluster của bạn. Security Group này có thể được sử dụng để hạn chế quyền truy cập vào các phiên bản cluster. Ví dụ: bạn có thể tạo quy tắc tùy chỉnh cho Security Group này cho phép truy cập TCP bằng cách sử dụng cổng mà bạn đã chỉ định cho cluster khi bạn tạo nó và một địa chỉ IP bạn sẽ sử dụng để truy cập cluster.\nCổng mặc định cho các cluster Redis và replicas group là 6379.\nĐể tạo quy tắc trong Security Group VPC cho phép kết nối từ một Security Group khác\nĐăng nhập vào AWS Management Console và mở Amazon VPC console tại https://console.aws.amazon.com/vpc.\nTrong ngăn dẫn hướng, chọn Security Groups.\nChọn hoặc tạo một security group mà bạn sẽ sử dụng cho các Cluster instances.\nTrong Inbound Rules, chọn Edit Inbound Rules\n5. sau đó chọn Add Rule. Security group này sẽ cho phép truy cập vào các thành viên của security group khác.\n6. Đối với Type, chọn Custom TCP Rule\nĐối với Port Range, chỉ định cổng bạn đã sử dụng khi tạo cluster của mình.\nCổng mặc định cho Redis clusters and replication groups là 6379.\nTrong hộp Source, bắt đầu nhập ID của security group. Từ danh sách, hãy chọn security group bạn sẽ sử dụng cho các Amazon EC2 instances của mình.\nChọn Save rule khi bạn hoàn thành. "
},
{
	"uri": "/vi/4-sdkelasticache/4.4-set-and-get-a-hash-with-multiple-items/",
	"title": "Set and Get a hash with multiple items",
	"tags": [],
	"description": "",
	"content": " Tạo một file python có tên SetAndGetHash.py Sao chép chương trình sau và dán vào file có tên SetAndGetHash.py. import logging\rimport time\rlogging.basicConfig(level=logging.INFO,format=\u0026#39;%(asctime)s: %(message)s\u0026#39;)\rkeyName=\u0026#39;mykey\u0026#39;\rkeyValues={\u0026#39;datetime\u0026#39;: time.ctime(time.time()), \u0026#39;epochtime\u0026#39;: time.time()}\r# Set the hash \u0026#39;mykey\u0026#39; with the current date and time in human readable format (datetime field) and epoch number (epochtime field). redis.hset(keyName, mapping=keyValues)\r# Set the key to expire and removed from cache in 60 seconds.\rredis.expire(keyName, 60)\r# Sleep just for better illustration of TTL (expiration) value\rtime.sleep(5)\r# Retrieves all the fields and current TTL\rkeyValues=redis.hgetall(keyName)\rkeyTTL=redis.ttl(keyName)\rlogging.info(\u0026#34;Key {} was set at {} and has {} seconds until expired\u0026#34;.format(keyName, keyValues, keyTTL)) Để chạy chương trình, hãy nhập lệnh sau: python SetAndGetHash.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file SetAndGetHash.py\u0026#34; "
},
{
	"uri": "/vi/4-sdkelasticache/",
	"title": "Sử dụng AWS SDK để ghi và đọc dữ liệu trên ElastiCache",
	"tags": [],
	"description": "",
	"content": "Tổng quan Trong hướng dẫn này, bạn sử dụng AWS SDK cho Python (Boto3) để viết các chương trình đơn giản nhằm thực hiện các hoạt động ElastiCache sau:\nTạo cluster ElastiCache (cluster mode disable và cluster mode enable)\nKiểm tra xem người dùng hoặc nhóm người dùng có tồn tại hay không, nếu không thì tạo (chỉ Redis 6.0 trở đi)\nKết nối với ElastiCache\nThực hiện các thao tác như thiết lập và lấy chuỗi, đọc và ghi vào hơi nước cũng như xuất bản và đăng ký từ kênh Pub / Sub.\nChuẩn bị\nThiết lập AWS Access Key để sử dụng AWS SDK.\nCài đặt Python 3.0 trở lên. Để biết thêm thông tin, hãy xem https://www.python.org/downloads.\nNội dung Tạo cluster Kết nối node Set and get string Publish and subscriber Write and read from a stream "
},
{
	"uri": "/vi/5.cleanupresource/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Xóa một cluster sử dụng Console Đăng nhập vào AWS Management Console và mở Amazon ElastiCache console tại https://console.aws.amazon.com/elasticache/.\nTrong ElastiCache console dashboard, chọn Redis clusters. Danh sách tất cả các cluster đang chạy Redis xuất hiện.\nĐể chọn cluster để xóa, hãy chọn tên của cluster từ danh sách các cluster. Trong trường hợp này, tên của cluster bạn đã tạo ở 3.2: Tạo cluster .\nĐối với Actions, hãy chọn Delete.\nTrong màn hình xác nhận Delete Cluster, chọn Delete để xóa cluster hoặc chọn Cancel để giữ cluster. Nếu bạn chọn Delete, trạng thái của cluster sẽ chuyển thành deleting.\nNgay sau khi cluster của bạn không còn được liệt kê trong danh sách các cluster, bạn sẽ ngừng tính phí cho cluster đó.\nXóa một cluster sử dụng AWS CLI Đoạn mã sau sẽ xóa cache cluster my-cluster. Trong trường hợp này, hãy thay thế my-cluster bằng tên của cụm bạn đã tạo ở 3.2: Tạo cluster.\naws elasticache delete-cache-cluster --cache-cluster-id my-cluster Hành động delete-cache-cluster CLI chỉ xóa một cache cluster. Để xóa nhiều cache cluster, hãy gọi delete-cache-cluster từng cache cluster mà bạn muốn xóa. Bạn không cần phải đợi một cache cluster hoàn tất việc xóa trước khi xóa một cache cluster khác.\nĐối với Linux, macOS hoặc Unix:\naws elasticache delete-cache-cluster \\\r--cache-cluster-id my-cluster \\\r--region us-east-2 Đối với Windows:\naws elasticache delete-cache-cluster ^\r--cache-cluster-id my-cluster ^\r--region us-east-2 "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.5-connect-to-the-cluster_s-node/",
	"title": "Kết nối với node của cluster",
	"tags": [],
	"description": "",
	"content": "Tổng quan Ứng dụng của bạn kết nối với cluster của bạn bằng cách sử dụng các endpoint. endpoint là địa chỉ duy nhất của node hoặc cluster.\nRedis standalone node, sử dụng endpoint của node cho cả hoạt động đọc và ghi. Redis (cluster mode disabled) clusters, sử dụng primary endpoint cho tất cả các hoạt động ghi. Sử dụng reader endpoint để chia đều các kết nối đến endpoint giữa tất cả các read replica. Sử dụng các endpoint node riêng lẻ cho các hoạt động đọc (Trong API / CLI, chúng được gọi là reader endpoint). Redis (cluster mode enabled) clusters, sử dụng endpoint cấu hình của cluster cho tất cả các hoạt động hỗ trợ các lệnh (cluster mode enable). Bạn phải sử dụng một ứng dụng khách hỗ trợ Redis Cluster (Redis 3.2). Bạn vẫn có thể đọc từ các endpoint node riêng lẻ (Trong API / CLI, chúng được gọi là reader endpoint). Nội dung Cluster Mode Disable Cluster Mode Enable Enpoint sử dụng AWS CLI "
},
{
	"uri": "/vi/4-sdkelasticache/4.5-publish-and-subscriber/",
	"title": "Publish (write) and subscribe (read)",
	"tags": [],
	"description": "",
	"content": " Tạo một file python có tên PubAndSub.py Sao chép chương trình sau và dán vào file có tên PubAndSub.py. import logging\rimport time\rdef handlerFunction(message):\r\u0026#34;\u0026#34;\u0026#34;Prints message got from PubSub channel to the log output\rReturn None\r:param message: message to log\r\u0026#34;\u0026#34;\u0026#34;\rlogging.info(message)\rlogging.basicConfig(level=logging.INFO)\rredis = Redis(host=\u0026#34;redis202104053.tihewd.ng.0001.use1.cache.amazonaws.com\u0026#34;, port=6379, decode_responses=True)\r# Creates the subscriber connection on \u0026#34;mychannel\u0026#34;\rsubscriber = redis.pubsub()\rsubscriber.subscribe(**{\u0026#39;mychannel\u0026#39;: handlerFunction})\r# Creates a new thread to watch for messages while the main process continues with its routines\rthread = subscriber.run_in_thread(sleep_time=0.01)\r# Creates publisher connection on \u0026#34;mychannel\u0026#34;\rredis.publish(\u0026#39;mychannel\u0026#39;, \u0026#39;My message\u0026#39;)\r# Publishes several messages. Subscriber thread will read and print on log.\rwhile True:\rredis.publish(\u0026#39;mychannel\u0026#39;,time.ctime(time.time()))\rtime.sleep(1) Để chạy chương trình, hãy nhập lệnh sau: python PubAndSub.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file PubAndSub.py\u0026#34; "
},
{
	"uri": "/vi/4-sdkelasticache/4.6-write-and-read-from-a-stream/",
	"title": "Write and read from a stream",
	"tags": [],
	"description": "",
	"content": " Tạo một file python có tên ReadWriteStream.py Sao chép chương trình sau và dán vào tệp có tên ReadWriteStream.py . from redis import Redis\rimport redis.exceptions as exceptions\rimport logging\rimport time\rimport threading\rlogging.basicConfig(level=logging.INFO)\rdef writeMessage(streamName):\r\u0026#34;\u0026#34;\u0026#34;Starts a loop writting the current time and thread name to \u0026#39;streamName\u0026#39;\r:param streamName: Stream (key) name to write messages.\r\u0026#34;\u0026#34;\u0026#34;\rfieldsDict={\u0026#39;writerId\u0026#39;:threading.currentThread().getName(),\u0026#39;myvalue\u0026#39;:None}\rwhile True:\rfieldsDict[\u0026#39;myvalue\u0026#39;] = time.ctime(time.time())\rredis.xadd(streamName,fieldsDict)\rtime.sleep(1)\rdef readMessage(groupName=None,streamName=None):\r\u0026#34;\u0026#34;\u0026#34;Starts a loop reading from \u0026#39;streamName\u0026#39;\rMultiple threads will read from the same stream consumer group. Consumer group is used to coordinate data distribution.\rOnce a thread acknowleges the message, it won\u0026#39;t be provided again. If message wasn\u0026#39;t acknowledged, it can be served to another thread.\r:param groupName: stream group were multiple threads will read.\r:param streamName: Stream (key) name where messages will be read.\r\u0026#34;\u0026#34;\u0026#34;\rreaderID=threading.currentThread().getName()\rwhile True:\rtry:\r# Check if the stream has any message\rif redis.xlen(streamName)\u0026gt;0:\r# Check if if the messages are new (not acknowledged) or not (already processed)\rstreamData=redis.xreadgroup(groupName,readerID,{streamName:\u0026#39;\u0026gt;\u0026#39;},count=1)\rif len(streamData) \u0026gt; 0:\rmsgId,message = streamData[0][1][0]\rlogging.info(\u0026#34;{}: Got {} from ID {}\u0026#34;.format(readerID,message,msgId))\r#Do some processing here. If the message has been processed sucessfuly, acknowledge it and (optional) delete the message.\rredis.xack(streamName,groupName,msgId)\rlogging.info(\u0026#34;Stream message ID {} read and processed successfuly by {}\u0026#34;.format(msgId,readerID))\rredis.xdel(streamName,msgId)\relse:\rpass\rexcept:\rraise\rtime.sleep(0.5)\r# Creates the stream \u0026#39;mystream\u0026#39; and consumer group \u0026#39;myworkergroup\u0026#39; where multiple threads will write/read.\rtry:\rredis.xgroup_create(\u0026#39;mystream\u0026#39;,\u0026#39;myworkergroup\u0026#39;,mkstream=True)\rexcept exceptions.ResponseError as e:\rlogging.info(\u0026#34;Consumer group already exists. Will continue despite the error: {}\u0026#34;.format(e))\rexcept:\rraise\r# Starts 5 writer threads.\rfor writer_no in range(5):\rwriterThread = threading.Thread(target=writeMessage, name=\u0026#39;writer-\u0026#39;+str(writer_no), args=(\u0026#39;mystream\u0026#39;,),daemon=True)\rwriterThread.start()\r# Starts 10 reader threads\rfor reader_no in range(10):\rreaderThread = threading.Thread(target=readMessage, name=\u0026#39;reader-\u0026#39;+str(reader_no), args=(\u0026#39;myworkergroup\u0026#39;,\u0026#39;mystream\u0026#39;,),daemon=True)\rreaderThread.daemon = True\rreaderThread.start()\r# Keep the code running for 30 seconds\rtime.sleep(30) Để chạy chương trình, hãy nhập lệnh sau: python ReadWriteStream.py Trường hợp không chạy được chương trình, ta sử dụng lệnh sau:\npython \u0026#34;đường dẫn file ReadWriteStream.py\u0026#34; "
},
{
	"uri": "/vi/3-amazonelasticacheforredis/3.6-deleting-a-cluster/",
	"title": "Xóa cluster",
	"tags": [],
	"description": "",
	"content": "Quy trình sau đây xóa một cluster đơn lẻ khỏi triển khai của bạn. Để xóa nhiều cluster, hãy lặp lại quy trình cho từng cluster mà bạn muốn xóa. Bạn không cần phải đợi một cluster hoàn thành xóa trước khi bắt đầu quy trình xóa một cluster khác.\nNội dung 3.6.1 Xóa cluster sử dụng Console 3.6.2 Xóa cluster sử dụng AWS CLI "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]